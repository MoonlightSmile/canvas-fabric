(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(t,n,e){"use strict";e.r(n);var a=e(0),o=e.n(a),i=e(19),c=e.n(i),s=(e(77),e(78),e(16)),r=e(27),l=e(28),u=e(32),f=e(29),d=e(33),v=e(34),h=e.n(v),p=e(70),m=e(20),g=(e(89),null),w=function(t){function n(t){var e;return Object(r.a)(this,n),(e=Object(u.a)(this,Object(f.a)(n).call(this,t))).clearPoints=function(){return e.setState({pointList:[]},function(){g.clear()}),[]},e.getPoints=function(){return e.state.pointList},e.start=function(){e.setState({doDrawing:!0})},e.finish=function(){e.setState({doDrawing:!1})},e.setPoints=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.setState({pointList:t}),!(t.length<1)){g.clear();var n=t.map(function(t){return"L ".concat(t.x," ").concat(t.y)}).join("").replace("L","M")+" z";g.add(new m.fabric.Path(n,{stroke:"red",fill:""}))}},e.state={doDrawing:!1,pointList:[],canvas:null},e}return Object(d.a)(n,t),Object(l.a)(n,[{key:"closeDrawing",value:function(t){if(this.finish(),!(this.state.pointList.length<1)){t.clear();var n=this.state.pointList.map(function(t){return"L ".concat(t.x," ").concat(t.y)}).join("").replace("L","M")+" z";t.add(new m.fabric.Path(n,{stroke:"red",fill:""}))}}},{key:"bindEvents",value:function(t){var n=this;document.body.addEventListener("contextmenu",function(e){e.preventDefault(),2===e.button&&n.closeDrawing(t)}),document.body.addEventListener("keyup",function(e){27===e.keyCode&&n.closeDrawing(t)}),t.on("mouse:down",function(t){var e={x:t.e.offsetX,y:t.e.offsetY};n.start(),n.setState(function(t){return{pointList:[].concat(Object(p.a)(t.pointList),[e])}})}),t.on("mouse:move",function(e){if(n.state.doDrawing&&n.state.pointList.length>0){t.clear();var a=n.state.pointList.map(function(t){return"L ".concat(t.x," ").concat(t.y)}).join("").replace("L","M")+" L ".concat(e.e.offsetX," ").concat(e.e.offsetY," z");t.add(new m.fabric.Path(a,{stroke:"red",fill:""}))}})}},{key:"componentDidMount",value:function(){g=new m.fabric.Canvas("canvas",{skipTargetFind:!0,selection:!1}),this.setState({canvas:g}),this.bindEvents(g)}},{key:"render",value:function(){var t=this.props,n=t.width,e=void 0===n?640:n,a=t.height,i=void 0===a?360:a;return o.a.createElement("div",null,o.a.createElement("canvas",{id:"canvas",width:e,height:i},"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301canvas\uff0c\u8bf7\u66f4\u6362\u6d4f\u89c8\u5668\u4f7f\u7528\uff01"))}}]),n}(a.Component),b=function(t){function n(){var t;return Object(r.a)(this,n),(t=Object(u.a)(this,Object(f.a)(n).call(this))).getPoints=function(){console.log("getPoints",t.refs.canvas.getPoints())},t.clearPoints=function(){console.log("clear",t.refs.canvas.clearPoints())},t.setPoints=function(){console.log("set",t.refs.canvas.setPoints([{x:10,y:40},{x:300,y:80}]))},t.start=function(){t.toggleDraw(),t.refs.canvas.start()},t.finish=function(){t.toggleDraw(),t.refs.canvas.finish()},t.state={isDraw:!1},t}return Object(d.a)(n,t),Object(l.a)(n,[{key:"toggleDraw",value:function(){this.setState(function(t){return{isDraw:!t.isDraw}})}},{key:"render",value:function(){var t=h.a.main,n=h.a.control,e=h.a.button;return o.a.createElement("div",{className:t},o.a.createElement(w,{ref:"canvas"}),o.a.createElement("div",{className:n},!1,o.a.createElement(s.a,{className:e,onClick:this.getPoints},"\u83b7\u53d6\u5750\u6807\u70b9"),o.a.createElement(s.a,{className:e,onClick:this.setPoints},"\u8bbe\u7f6e\u5750\u6807\u70b9"),o.a.createElement(s.a,{className:e,onClick:this.clearPoints},"\u6e05\u7a7a\u5750\u6807\u70b9")))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},34:function(t,n,e){t.exports={main:"App_main__2a5c9",control:"App_control__G3x71",button:"App_button__2k4fN"}},72:function(t,n,e){t.exports=e(138)},77:function(t,n,e){},85:function(t,n){},86:function(t,n){},87:function(t,n){},88:function(t,n){},89:function(t,n,e){}},[[72,1,2]]]);
//# sourceMappingURL=main.599d6664.chunk.js.map